The scripts provided in this folder are taken from the jupyter Notebooks stored on bs-jupyterhub05 VM. They have been migrated to python scripts.
The goal is to generate plots for the wastewater reproting e-mails. As well as some filtering or remormatting of the json file output generated by lollipop.

# /cluster/project/pangolin/cowwid/for_communication/scripts/make_curves.sh
The make_curves.sh script calles '/cluster/project/pangolin/cowwid/for_communication/scripts/ww_cov_curves_v-pipe.py'.
This script processes and visualizes smoothed time-series data on SARS-CoV-2 variant proportions across Swiss locations ("/cluster/project/pangolin/work-vp-test/variants/deconvoluted_upload.json"). It loads configuration and input data, 
filters variant trends by location-specific start dates, and ensures all variants are properly mapped to colors. The script then generates multi-panel plots of recent variant 
dynamics with confidence intervals and exports the cleaned data in three JSON formats: for general use, CovSpectrum upload (excluding blacklisted entries), and FOPH/BAG Polybox submission.
relevant path' and blacklist is stored in "/cluster/project/pangolin/cowwid/for_communication/config/config.yaml".

The make_curves.sh script also calles '/cluster/project/pangolin/cowwid/for_communication/scripts/historical/merge_json.py'.
This is used to merge the new results with the historical data (discuntinured treatments plants) to get the full json for the upload to wiseDB.



# /cluster/project/pangolin/cowwid/for_communication/scripts/make_switzerland_map.sh
The make_switzerland_map.sh script calls '/cluster/project/pangolin/cowwid/for_communication/scripts/ww_cov_switzerland_map.py'.
This script generates a Swiss map visualizing SARS-CoV-2 variant proportions across selected wastewater treatment plant catchment areas. 
It loads geographic shapefiles, demographic data, and variant deconvolution results from a YAML-configured pipeline. The script filters data from the most recent week, 
calculates average variant proportions per location, and draws population-scaled pie charts over the corresponding catchment areas. It overlays cantonal boundaries, lakes, 
and municipalities for geographic context, and includes a dynamically sorted legend showing prevalent variants. The final map is saved in PNG, SVG, and PDF formats for communication or reporting purposes.

# /cluster/project/pangolin/cowwid/for_communication/scripts/upload.sh
The upload.sh.sh script calls '/cluster/project/pangolin/cowwid/for_communication/scripts/ww_cov_uploader_v-pipe.py'.
This script automates the upload of processed SARS-CoV-2 wastewater variant data to multiple platforms. It connects to the CovSpectrum PostgreSQL database using credentials stored in a .netrc 
file and updates or inserts variant time series for each location. It then compresses the combined JSON dataset, computes a SHA-256 checksum, and uploads the file to WiseDB via an authenticated curl request. 
Lastly, it uploads the dataset and its reformatted version to both the FOPH/BAG Polybox and a public Polybox folder using secure curl transfers.
